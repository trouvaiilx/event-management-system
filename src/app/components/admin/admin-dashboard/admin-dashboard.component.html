<!-- src/app/components/admin/admin-dashboard/admin-dashboard.component.html -->

<div class="dashboard-container">
  <app-navbar></app-navbar>

  <div class="dashboard-content">
    <div class="page-header">
      <h1>Admin Dashboard</h1>
      <p class="subtitle">Welcome back, {{currentUser?.fullName}}!</p>
    </div>

    <div *ngIf="loading" class="loading-container">
      <mat-spinner></mat-spinner>
    </div>

    <div *ngIf="!loading">
      <!-- Statistics Cards -->
      <div class="stats-grid">
        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-icon organizers">
              <mat-icon>group</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{totalOrganizers}}</h3>
              <p>Event Organizers</p>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-icon events">
              <mat-icon>event</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{totalEvents}}</h3>
              <p>Total Events</p>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-icon bookings">
              <mat-icon>confirmation_number</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{totalBookings}}</h3>
              <p>Total Bookings</p>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-icon revenue">
              <mat-icon>attach_money</mat-icon>
            </div>
            <div class="stat-info">
              <h3>${{totalRevenue.toFixed(2)}}</h3>
              <p>Total Revenue</p>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="action-buttons">
          <button 
            mat-raised-button 
            color="primary"
            (click)="navigateToRegisterOrganizer()"
          >
            <mat-icon>person_add</mat-icon>
            Register Organizer
          </button>

          <button 
            mat-raised-button 
            color="accent"
            (click)="navigateToManageOrganizers()"
          >
            <mat-icon>manage_accounts</mat-icon>
            Manage Organizers
          </button>

          <button 
            mat-raised-button 
            (click)="navigateToReports()"
          >
            <mat-icon>assessment</mat-icon>
            View Reports
          </button>
        </div>
      </div>

      <!-- Recent Organizers -->
      <mat-card class="recent-section">
        <mat-card-header>
          <mat-card-title>Recent Organizers</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div *ngIf="recentOrganizers.length === 0" class="empty-state">
            <mat-icon>person_off</mat-icon>
            <p>No organizers registered yet</p>
          </div>

          <table mat-table [dataSource]="recentOrganizers" *ngIf="recentOrganizers.length > 0">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let organizer">{{organizer.fullName}}</td>
            </ng-container>

            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let organizer">{{organizer.email}}</td>
            </ng-container>

            <ng-container matColumnDef="organization">
              <th mat-header-cell *matHeaderCellDef>Organization</th>
              <td mat-cell *matCellDef="let organizer">{{organizer.organizationName || 'N/A'}}</td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let organizer">
                <mat-chip [class.active]="organizer.isActive" [class.inactive]="!organizer.isActive">
                  {{organizer.isActive ? 'Active' : 'Inactive'}}
                </mat-chip>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['name', 'email', 'organization', 'status']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['name', 'email', 'organization', 'status']"></tr>
          </table>
        </mat-card-content>
      </mat-card>

      <!-- Recent Events -->
      <mat-card class="recent-section">
        <mat-card-header>
          <mat-card-title>Recent Events</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div *ngIf="recentEvents.length === 0" class="empty-state">
            <mat-icon>event_busy</mat-icon>
            <p>No events created yet</p>
          </div>

          <table mat-table [dataSource]="recentEvents" *ngIf="recentEvents.length > 0">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Event Name</th>
              <td mat-cell *matCellDef="let event">{{event.name}}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let event">{{event.date | date: 'mediumDate'}}</td>
            </ng-container>

            <ng-container matColumnDef="organizer">
              <th mat-header-cell *matHeaderCellDef>Organizer</th>
              <td mat-cell *matCellDef="let event">{{getOrganizerName(event.organizerId)}}</td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let event">
                <mat-chip>{{event.status}}</mat-chip>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['name', 'date', 'organizer', 'status']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['name', 'date', 'organizer', 'status']"></tr>
          </table>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>